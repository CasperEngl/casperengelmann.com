---
const { endDate, startDate, role, link, linkTitle, company } = Astro.props

const formatDate = (dateString: string) => {
	const date = new Date(dateString)

	if (date.getTime() - Date.now() > 0) {
		return 'Present'
	}

	return date.getFullYear()
}
---

<li>
	<div class="flex flex-col items-start">
		{endDate ? (
			<span>
				{formatDate(startDate)} &mdash; {formatDate(endDate)}
			</span>
		) : (
			<span>{formatDate(startDate)} to date</span>
		)}
		<span>
			{role} @{' '}
			{link ? (
				<a
					href={link}
					rel="noopener noreferrer"
					target="_blank"
					title={linkTitle}
				>
					{company}
				</a>
			) : (
				company
			)}
		</span>
	</div>
</li>
